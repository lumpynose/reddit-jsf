<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="jakarta.faces.facelets" xmlns:f="jakarta.faces.core"
    xmlns:c="jakarta.tags.core" xmlns:h="jakarta.faces.html"
    xmlns:o="https://omnifaces.org/ui"
    xmlns:of="https://omnifaces.org/functions"
    xmlns:p="https://primefaces.org/ui"
    xmlns:pt="https://xmlns.jcp.org/jsf/passthrough">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <h:outputStylesheet name="css/stylesheet.css" />
    <title>Select or add user</title>
</h:head>

<f:metadata>
    <f:viewParam name="user" value="#{selectUser.user}" />
</f:metadata>

<h:body>
    <div>
        <header>
            <h2>Select or add user</h2>
        </header>

        <main>
            <div class="formOuter">
                <h:form>
                    <p class="messages">
                        <h:messages />
                    </p>

                    <p class="selectUser">
                        <h:outputLabel for="selectUser" value="Select user:" />
                        <br />
<!--                    <h:selectOneMenu id="selectUser" -->
<!--                          value="#{selectUser.user}" editable="true"> -->
                        <h:selectOneMenu id="selectUser"
                            value="#{selectUser.user}" >
                            <f:selectItem itemLabel="Select One"
                                itemValue="" />
                            <f:selectItems
                                value="#{selectUser.userNames}" />
<!--                             <f:ajax /> -->
                        </h:selectOneMenu>
                    </p>

                    <p class="messages">
                        <h:message for="selectUser" />
                    </p>

                    <p class="addUser">
                        <h:outputLabel for="addUser" value="Add user:" />
                        <br />
                        <h:inputText id="addUser" title="Add user"
                            value="#{selectUser.addUser}">
                            <f:validator validatorId="userValidator" />
                            <f:validateLength minimum="2" />
<!--                             <f:ajax /> -->
                        </h:inputText>
                    </p>

                    <p class="submit">
<!--                     <h:commandButton value="Submit" type="submit" -->
<!--                         action="#{selectUser.submit()}"> -->
<!--                         <f:ajax execute="@form" render="@form" /> -->
<!--                         <f:param name="user" value="#{selectUser.user}" /> -->
<!--                     </h:commandButton> -->
                       <h:commandButton value="submit"
                           action="modifyuser.xhtml?faces-redirect=true&amp;includeViewParams=true" >
                            <f:param name="user" value="#{selectUser.user}" />
                            <f:ajax execute="@form" render="@form" />
                       </h:commandButton>
<!--                            action="modifyuser.xhtml?faces-redirect=true" > -->
                    </p>

                    <p class="messages">
                        <h:message for="addUser" />
                    </p>
                </h:form>
            </div>

            <p>
                <h:link value="start over" outcome="/index.xhtml" />
            </p>
        </main>
    </div>
</h:body>

</html>